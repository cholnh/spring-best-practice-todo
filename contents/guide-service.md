# Service 스타일 가이드
<br/><br/>



## :speech_balloon: 개요

해당 프로젝트에서 사용된 Service 구조 및 코드 스타일에 대해 설명합니다.

<br/><br/>


## 기본 구조

레이어드 아키텍처 또는 헥사고날 아키텍처에서 계층(영역) 간 호출은 인터페이스를 통해 호출하는 것이 바람직합니다.  

<br/>

추상 인터페이스를 통한 통신이 상-하위 계층간 의존성을 분리시켜주고,  
하위 계층에서는 추상적 인터페이스를 만족하는 다양한 방식의 구현체를 선택적으로 적용할 수 있게 됩니다.  

<br/>

마이크로 서비스 아키텍처 구조를 다시 살펴보면,  

|<img src="https://github.com/cholnh/spring-best-practice-todo/blob/master/assets/images/guide-directory/ddd-hex-domain-2.png" width="900"/>|
|-|
|마이크로 서비스의 내부 구조|

외부 영역과 내부 영역 사이에 추상 인터페이스(Service I/F, Proxy I/F, Event I/F, Repository I/F 등)가 존재합니다.  
이러한 인터페이스를 통한 기술(저수준의 외부 영역)과 비즈니스(고수준의 내부 영역) 분리는 응집성을 높이고 의존도를 낮추게 됩니다.  

<br/>

서비스 인터페이스는 외부 영역이 내부 영역에 대해 너무 많이 알지 못하게 가리는 역할을 합니다.  
또한 인터페이스를 통해 외부/내부 서비스의 구현 및 테스트를 독자적으로 진행할 수 있도록 합니다.  
(인터페이스가 없이 서비스 구현체를 직접 호출한다면 서비스의 구현이 끝난 후에 다음 작업이 진행될 수 밖에 없습니다)  

<br/>

서비스 인터페이스를 구현하는 **구현체** 에서는 도메인을 활용해 시스템 흐름 처리를 수행합니다.  
(비즈니스 개념 표현 및 비즈니스 행위는 서비스 구현체가 아닌 도메인 모델 객체 스스로가 제어합니다)  

<br/>

또한 자바 스프링 프레임워크를 사용하는 프로젝트에서의 서비스 구현체는 데이터베이스에 대한 트랜젝션을 관리하게 됩니다.  
도메인 객체 내부에 비즈니스 행위가 정의 되어 있지만 그것을 영속화 시켜야 하기 때문에 별도로 서비스 구현체에서 트랜젝션을 관리합니다.  
   
<br/>

즉 서비스 영역은 인프라스트럭처 영역(데이터베이스와 같은)과 도메인 영역을 연결해주는 매개체 역할이고,  
비즈니스 행위는 도메인 모델 스스로가 제어해야 합니다.

<br/>