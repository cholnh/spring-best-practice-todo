# Domain Model 및 범위 가이드

<br/><br/>



## :speech_balloon: 개요

해당 프로젝트에서 다루는 Domain Model 에 대해 설명하며 Domain Model 의 책임 범위에 대해 알아보겠습니다.

<br/><br/>




## Domain Model

도메인은 비즈니스 개념을 표현하고, 서비스는 도메인을 활용해 시스템 흐름 처리를 수행합니다.  
여기서 중요한 점은 서비스는 흐름 처리를 수행할 뿐 비즈니스 로직은 도메인 객체 스스로가 책임을 다해야 합니다.  


<br/><br/>



## Domain Model 의 책임 범위

일반적인 헥사고날 아키텍처는 다음과 같은 구조를 갖습니다.  

- (외부 영역) Controller 레이어
- (내부 영역) Service 레이어
- (내부 영역) Repository 레이어

위 구조에서 Domain Model 의 책임은 어느 범위까지 노출되어야 할까요?  

<br/>

외부랑 통신을 하게되는 외부 영역 어댑터에서는 Domain Model 대신 DTO 를 통해 통신하게 됩니다.  
내부 비즈니스 로직을 담당하는 Domain Model 의 책임이 외부 영역까지 확장될 필요가 없을 뿐더러(비즈니스 로직은 트렌젝션 내에서만 해결),  
Domain Model 을 통해 외부랑 통신을 할 경우 내부 비즈니스 규칙이 노출 될 위험이 있기 때문입니다.  

<br/>

서비스 레이어에서는 컨트롤러에서 넘겨진 DTO 를 Domain Model 으로 변환하는 작업을 거칩니다.  
서비스 레이어에서 DTO 를 받는 까닭은 위 설명과 같이 Domain Model 의 책임이 외부 영역까지 확장될 필요가 없을 뿐더러,  
컨트롤러 레이어에서의 Domain Model 변환 처리는 input/output 에 대한 명확성이 떨어지는 단점이 있기 때문입니다.  


<br/>

원칙적으론 여러 외부 어댑터를 지원해야 하는 헥사고날 아키텍처에서의 서비스 레이어는 공통된 비즈니스 Model 을 사용하는 것이 마땅합니다.  
서비스 레이어의 DTO 사용은 의존성이 안쪽(컨트롤러에서 서비스, 서비스에서 리포짓토리)으로 향해야 하는 아키텍처에서 그 흐름을 거스르기 때문입니다.
하지만 보통 여러 종류의 컨트롤러가 하나의 서비스를 사용하기 보단 한 종류의 컨트롤러가 서비스를 사용하기 때문에  
서비스 레이어 까지 DTO 진입을 허용하여 변환하여 사용하거나, transform 레이어를 중간에 추가한 4-tier 전략으로 가기도 합니다.  

<br/>

